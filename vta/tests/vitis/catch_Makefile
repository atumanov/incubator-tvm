VTA_HOME = $(TVM_HOME)/vta
TEST_PATH := $(VTA_HOME)/tests/vitis
DRIVER_PATH := $(VTA_HOME)/src/vitis

CXX = g++
CXXFLAGS = --std=c++11 -I$(VTA_HOME)/include/vta/ -I$(VTA_HOME)/src/vitis -DUSE_VTA64 -Wall
LDFLAGS =

SRCS = $(DRIVER_PATH)/mem_manager.cc
CATCH_MAIN = $(TEST_PATH)/catch_main.cc
TEST_SRCS = $(TEST_PATH)/naive_manger/test_naive_manager.cc
CATCH_OBJS := $(CATCH_MAIN:.cc=.o)
OBJS := $(SRCS:.cc=.o)

.PHONY: clean all

all: test
$(info $(DRIVER_PATH))
test: $(OBJS)
	$(info $@)
	$(CXX) $(CXXFLAGS) -c $(CATCH_MAIN)
	$(CXX) $(CXXFLAGS) -c $(SRCS)
	$(CXX) $(CXXFLAGS) -o $@ $(CATCH_OBJS) $(OBJS) $(TEST_SRCS)

clean:
	rm -rf *.o test
